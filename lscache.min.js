/**
 * lscache library v1.0.0
 * Copyright (c) 2011, 2013 Pamela Fox
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lscache=function(){function l(){if(void 0!==g)return g;try{n("__lscachetest__","__lscachetest__"),f("__lscachetest__"),g=!0}catch(a){g=!1}return g}function t(){void 0===m&&(m=null!=window.JSON);return m}function n(a,b){localStorage.removeItem(e+c+a);localStorage.setItem(e+c+a,b)}function f(a){localStorage.removeItem(e+c+a)}function s(a,b){!u||!1 in window||"function"!==typeof window.console.warn||(window.console.warn("lscache - "+a),b&&window.console.warn("lscache - The error was: "+b.message))}
var e="lscache-",v=Math.floor(144E9),g,m,c="",u=!1;return{set:function(a,b,h){if(l()){if("string"!==typeof b){if(!t())return;try{b=JSON.stringify(b)}catch(g){return}}try{n(a,b)}catch(p){if("QUOTA_EXCEEDED_ERR"===p.name||"NS_ERROR_DOM_QUOTA_REACHED"===p.name||"QuotaExceededError"===p.name){for(var q=[],d,k=0;k<localStorage.length;k++)if(d=localStorage.key(k),0===d.indexOf(e+c)&&0>d.indexOf("-cacheexpiration")){d=d.substr((e+c).length);var r=localStorage.getItem(e+c+(d+"-cacheexpiration")),r=r?parseInt(r,
10):v;q.push({key:d,size:(localStorage.getItem(e+c+d)||"").length,expiration:r})}q.sort(function(a,b){return b.expiration-a.expiration});for(k=(b||"").length;q.length&&0<k;)d=q.pop(),s("Cache is full, removing item with key '"+a+"'"),f(d.key),f(d.key+"-cacheexpiration"),k-=d.size;try{n(a,b)}catch(m){s("Could not add item with key '"+a+"', perhaps it's too big?",m);return}}else{s("Could not add item with key '"+a+"'",p);return}}h?n(a+"-cacheexpiration",(Math.floor((new Date).getTime()/6E4)+h).toString(10)):
f(a+"-cacheexpiration")}},get:function(a){if(!l())return null;var b=a+"-cacheexpiration",h=localStorage.getItem(e+c+b);if(h&&(h=parseInt(h,10),Math.floor((new Date).getTime()/6E4)>=h))return f(a),f(b),null;a=localStorage.getItem(e+c+a);if(!a||!t())return a;try{return JSON.parse(a)}catch(g){return a}},remove:function(a){if(!l())return null;f(a);f(a+"-cacheexpiration")},supported:function(){return l()},flush:function(){if(l())for(var a=localStorage.length-1;0<=a;--a){var b=localStorage.key(a);0===b.indexOf(e+
c)&&localStorage.removeItem(b)}},setBucket:function(a){c=a},resetBucket:function(){c=""},enableWarnings:function(a){u=a}}}();